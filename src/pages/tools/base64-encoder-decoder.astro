---
import ToolLayout from "@/layouts/ToolLayout.astro";
import Label from "@/components/Label.astro";
import Textarea from "@/components/Textarea.astro";
import Button from "@/components/Button.astro";
---

<ToolLayout slug="base64-encoder-decoder">
  <div class="flex flex-1 flex-col space-y-4">
    <div class="grid gap-2">
      <Label for="input">Input</Label>
      <Textarea
        rows={5}
        placeholder="Enter text to encode or decode..."
        id="input"
      />
    </div>

    <div class="flex items-center gap-2">
      <Button id="encode">Encode</Button>
      <Button id="decode">Decode</Button>
    </div>

    <div class="grid gap-2">
      <Label for="output">Output</Label>
      <Textarea
        rows={5}
        readonly
        placeholder="Result"
        id="output"
        class="bg-zinc-900"
      />
    </div>
  </div>
</ToolLayout>

<script>
  const input = document.getElementById("input") as HTMLInputElement;
  const output = document.getElementById("output") as HTMLInputElement;

  const encodeButton = document.getElementById("encode") as HTMLButtonElement;
  const decodeButton = document.getElementById("decode") as HTMLButtonElement;

  encodeButton.addEventListener("click", () => {
    const encoded = btoa(input.value);
    output.value = encoded;
  });

  decodeButton.addEventListener("click", () => {
    try {
      const decoded = atob(input.value);
      output.value = decoded;
    } catch (e) {
      output.value = "Invalid Base64 string";
    }
  });
</script>
